<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalized Gift Experience</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="assets/images/VM White logo WN.png">
</head>
<body>

    <div class="preloader" id="preloader">
        <div class="preloader-diamond"></div>
        <div class="preloader-text">Loading</div>
    </div>

    <header class="page-header">
        <a href="index.html"><img src="assets/images/VM White logo WN.png" alt="Velvet Memories" class="header-logo"></a>
        <div class="header-breadcrumb">
            <span class="breadcrumb-current">Personalized Gift Experience</span>
        </div>
    </header>

    <section class="gift-page">
        <div class="gift-builder" id="giftBuilder">
            <div class="gift-quiz" id="giftQuiz">
                <div class="progress-dots" id="progressDots">
                    <div class="progress-dot active"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>

                <div class="quiz-step active" data-step="1" data-auto="true">
                    <h3>What's the occasion?</h3>
                    <div class="quiz-options">
                        <button class="quiz-option" data-key="occasion" data-value="Love">Love</button>
                        <button class="quiz-option" data-key="occasion" data-value="Birthday">Birthday</button>
                        <button class="quiz-option" data-key="occasion" data-value="Anniversary">Anniversary</button>
                        <button class="quiz-option" data-key="occasion" data-value="Thank You">Thank You</button>
                        <button class="quiz-option" data-key="occasion" data-value="Congratulations">Congratulations</button>
                        <button class="quiz-option" data-key="occasion" data-value="Just Because">Just Because</button>
                    </div>
                </div>

                <div class="quiz-step" data-step="2">
                    <h3>What do you want in the box?</h3>
                    <textarea class="quiz-textarea" id="boxContents" placeholder="e.g. 12 assorted truffles, 6 pralines..."></textarea>
                    <div class="quiz-nav">
                        <button class="btn-quiz-nav" onclick="prevStep()">&#8592; Back</button>
                        <button class="btn-quiz-nav" onclick="nextStep()">Next &#8594;</button>
                    </div>
                </div>

                <div class="quiz-step" data-step="3" data-auto="true">
                    <h3>Pick a color theme</h3>
                    <div class="quiz-options">
                        <button class="quiz-option" data-key="color" data-value="Red & Gold">Red & Gold</button>
                        <button class="quiz-option" data-key="color" data-value="Black & Gold">Black & Gold</button>
                        <button class="quiz-option" data-key="color" data-value="White & Pink">White & Pink</button>
                        <button class="quiz-option" data-key="color" data-value="Pastel">Pastel</button>
                        <button class="quiz-option" data-key="color" data-value="Classic Brown">Classic Brown</button>
                    </div>
                    <div class="quiz-nav">
                        <button class="btn-quiz-nav" onclick="prevStep()">&#8592; Back</button>
                    </div>
                </div>

                <div class="quiz-step" data-step="4" data-auto="true">
                    <h3>Add extras to the gift?</h3>
                    <div class="quiz-options">
                        <button class="quiz-option" data-key="extras" data-value="Roses">Roses</button>
                        <button class="quiz-option" data-key="extras" data-value="Teddy Bear">Teddy Bear</button>
                        <button class="quiz-option" data-key="extras" data-value="Balloons">Balloons</button>
                        <button class="quiz-option" data-key="extras" data-value="Ribbon & Bow">Ribbon & Bow</button>
                        <button class="quiz-option" data-key="extras" data-value="Personal Note">Personal Note</button>
                        <button class="quiz-option" data-key="extras" data-value="None">None</button>
                    </div>
                    <div class="quiz-nav">
                        <button class="btn-quiz-nav" onclick="prevStep()">&#8592; Back</button>
                    </div>
                </div>

                <div class="quiz-step" data-step="5">
                    <h3>Any special message?</h3>
                    <textarea class="quiz-textarea" id="specialMessage" placeholder="Write a personal message to include with the gift..."></textarea>
                    <div class="quiz-nav finish-nav">
                        <button class="btn-quiz-nav" onclick="prevStep()">&#8592; Back</button>
                        <div class="finish-btn-wrapper">
                            <svg class="finish-star" width="28" height="28" viewBox="0 0 28 28" fill="none" stroke="#D4AD3E" stroke-width="1.2"><path d="M14 2l3.5 8.5L26 12l-6.5 5.5L21.5 26 14 21.5 6.5 26l2-8.5L2 12l8.5-1.5Z"/></svg>
                            <button class="btn-quiz-nav btn-finish" onclick="finishGift()">Complete Gift</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="gift-live-preview" id="giftLivePreview">
                <div class="gift-canvas" id="giftCanvas">
                    <div class="gift-layer gift-occasion-icon" id="occasionLayer"></div>
                    <div class="gift-layer gift-contents-text" id="contentsLayer"></div>
                    <div class="gift-layer gift-extra-icon" id="extraLayer"></div>
                    <div class="gift-layer gift-message-text" id="messageLayer"></div>
                </div>
                <p class="gift-live-label">Your gift is taking shape...</p>
            </div>
        </div>

        <div class="gift-final" id="giftFinal">
            <h3 class="gift-preview-title">Your Gift</h3>
            <div class="gift-final-card" id="finalCard">
                <div class="gift-final-icon" id="finalIcon"></div>
                <div class="gift-final-details" id="finalDetails"></div>
            </div>
            <button class="btn-order" onclick="orderGift()" style="margin-top:30px;">Ready to Order</button>
        </div>
    </section>

    <div class="nav-accordion" id="navAccordion">
        <button class="nav-accordion-toggle" id="navToggle">
            <span></span><span></span><span></span>
        </button>
        <nav class="nav-accordion-menu">
            <a href="index.html">Home</a>
            <a href="chocolate-collection.html">Chocolate Collection</a>
            <a href="setup-decorations.html">Setup Decorations</a>
            <a href="custom-design.html">Custom Chocolate Design</a>
            <a href="workshop.html">Mini Workshop</a>
            <a href="personalized-gift.html" class="current">Personalized Gift</a>
        </nav>
    </div>

    <footer class="site-footer">
        <img src="assets/images/VM White logo WN.png" alt="Velvet Memories" class="footer-logo">
        <div class="footer-brand">Velvet Memories</div>
        <nav class="footer-links">
            <a href="chocolate-collection.html">Chocolate Collection</a>
            <a href="setup-decorations.html">Setup Decorations</a>
            <a href="custom-design.html">Custom Design</a>
            <a href="workshop.html">Workshop</a>
            <a href="personalized-gift.html">Personalized Gift</a>
        </nav>
        <div class="footer-divider"></div>
        <p class="footer-copy">&copy; 2026 Velvet Memories. All rights reserved.</p>
    </footer>
    <script>document.getElementById('navToggle').addEventListener('click',()=>document.getElementById('navAccordion').classList.toggle('open'));</script>
    <script>window.addEventListener('scroll',()=>document.querySelector('.page-header').classList.toggle('scrolled',window.scrollY>50));</script>
    <script>window.addEventListener('scroll',()=>document.querySelector('.page-header').classList.toggle('scrolled',window.scrollY>50));</script>

    <script>
        const giftState = { occasion: '', contents: '', color: '', extras: [], message: '' };
        let currentStep = 1;
        const totalSteps = 5;

        const occasionIcons = {
            'Love': '<svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M50 85 C50 85 12 58 12 33 C12 20 22 10 35 10 C42 10 48 14 50 20 C52 14 58 10 65 10 C78 10 88 20 88 33 C88 58 50 85 50 85Z"/></svg>',
            'Birthday': '<svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2"><rect x="20" y="40" width="60" height="45" rx="5"/><rect x="15" y="55" width="70" height="10" rx="3"/><path d="M50 40V25"/><ellipse cx="50" cy="22" rx="4" ry="5"/><path d="M50 17c0-5 3-8 3-12"/><path d="M35 40V30"/><ellipse cx="35" cy="27" rx="3" ry="4"/><path d="M65 40V30"/><ellipse cx="65" cy="27" rx="3" ry="4"/></svg>',
            'Anniversary': '<svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2"><circle cx="35" cy="45" r="18"/><circle cx="65" cy="45" r="18"/><path d="M44 34l6-12 6 12"/><path d="M50 22v-8"/></svg>',
            'Thank You': '<svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2"><path d="M50 10L58 38L88 38L64 56L72 84L50 68L28 84L36 56L12 38L42 38Z"/></svg>',
            'Congratulations': '<svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2"><path d="M30 90L42 50 20 25"/><path d="M70 90L58 50 80 25"/><circle cx="50" cy="35" r="20"/><path d="M40 35l5 5 12-12"/></svg>',
            'Just Because': '<svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2"><rect x="22" y="30" width="56" height="50" rx="4"/><path d="M22 50h56"/><path d="M50 30v50"/><path d="M50 30c0-12-10-18-16-14s-4 14 16 14"/><path d="M50 30c0-12 10-18 16-14s4 14-16 14"/></svg>'
        };

        const extraIcons = {
            'Roses': '<svg viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.2"><circle cx="20" cy="14" r="8"/><path d="M16 10c2 4 6 4 8 0"/><path d="M14 14c3 3 9 3 12 0"/><path d="M20 22v14"/><path d="M16 28c2-3 4-4 4-6"/></svg>',
            'Teddy Bear': '<svg viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.2"><circle cx="20" cy="20" r="10"/><circle cx="13" cy="10" r="4"/><circle cx="27" cy="10" r="4"/><circle cx="17" cy="18" r="1.5"/><circle cx="23" cy="18" r="1.5"/><ellipse cx="20" cy="23" rx="3" ry="2"/></svg>',
            'Balloons': '<svg viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.2"><ellipse cx="14" cy="14" rx="7" ry="9"/><ellipse cx="26" cy="12" rx="6" ry="8"/><path d="M14 23l6 12"/><path d="M26 20l-6 15"/></svg>',
            'Ribbon & Bow': '<svg viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.2"><path d="M20 18c-6-4-12-4-12 2s6 6 12 2"/><path d="M20 18c6-4 12-4 12 2s-6 6-12 2"/><circle cx="20" cy="18" r="3"/><path d="M18 21v14"/><path d="M22 21v14"/></svg>',
            'Personal Note': '<svg viewBox="0 0 40 40" fill="none" stroke="currentColor" stroke-width="1.2"><rect x="8" y="6" width="24" height="28" rx="2"/><line x1="13" y1="14" x2="27" y2="14"/><line x1="13" y1="19" x2="27" y2="19"/><line x1="13" y1="24" x2="22" y2="24"/></svg>'
        };

        const colorMap = {
            'Red & Gold': { bg: 'linear-gradient(135deg, #861b1c, #D4AD3E)', stroke: '#D4AD3E', text: '#fff' },
            'Black & Gold': { bg: 'linear-gradient(135deg, #1a1a1a, #D4AD3E)', stroke: '#D4AD3E', text: '#fff' },
            'White & Pink': { bg: 'linear-gradient(135deg, #f5e6e8, #e8b4c8)', stroke: '#c47a9a', text: '#1a0a0a' },
            'Pastel': { bg: 'linear-gradient(135deg, #b8d4e3, #f5d5e0)', stroke: '#8ab0c8', text: '#1a0a0a' },
            'Classic Brown': { bg: 'linear-gradient(135deg, #3B1C0E, #7B4B2A)', stroke: '#D4AD3E', text: '#fff' }
        };

        document.querySelectorAll('.quiz-option').forEach(btn => {
            btn.addEventListener('click', () => {
                const key = btn.getAttribute('data-key');
                const value = btn.getAttribute('data-value');
                btn.closest('.quiz-options').querySelectorAll('.quiz-option').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                if (key === 'extras') {
                    giftState.extras = value === 'None' ? [] : [value];
                } else {
                    giftState[key] = value;
                }
                updateLivePreview();
                const step = btn.closest('.quiz-step');
                if (step && step.getAttribute('data-auto') === 'true') {
                    setTimeout(() => nextStep(), 400);
                }
            });
        });

        document.getElementById('boxContents').addEventListener('input', function() {
            giftState.contents = this.value;
            updateLivePreview();
        });
        document.getElementById('specialMessage').addEventListener('input', function() {
            giftState.message = this.value;
            updateLivePreview();
        });

        function updateLivePreview() {
            const canvas = document.getElementById('giftCanvas');
            const theme = colorMap[giftState.color] || { bg: '', stroke: '#D4AD3E', text: '#fff' };
            canvas.style.background = giftState.color ? theme.bg : '';
            canvas.style.color = theme.stroke;
            if (giftState.color) canvas.style.borderColor = theme.stroke;

            const oLayer = document.getElementById('occasionLayer');
            oLayer.innerHTML = (giftState.occasion && occasionIcons[giftState.occasion]) ? occasionIcons[giftState.occasion] : '';
            oLayer.style.opacity = giftState.occasion ? '1' : '0';

            const cLayer = document.getElementById('contentsLayer');
            cLayer.textContent = giftState.contents || '';
            cLayer.style.color = theme.text;
            cLayer.style.opacity = giftState.contents ? '1' : '0';

            const eLayer = document.getElementById('extraLayer');
            const hasExtra = giftState.extras.length && giftState.extras[0] !== 'None' && extraIcons[giftState.extras[0]];
            eLayer.innerHTML = hasExtra ? extraIcons[giftState.extras[0]] : '';
            eLayer.style.opacity = hasExtra ? '1' : '0';

            const mLayer = document.getElementById('messageLayer');
            mLayer.textContent = giftState.message ? '\u201C' + giftState.message + '\u201D' : '';
            mLayer.style.color = theme.text;
            mLayer.style.opacity = giftState.message ? '1' : '0';
        }

        function updateDots() {
            document.querySelectorAll('.progress-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i < currentStep);
            });
        }

        function showStep(step) {
            const outgoing = document.querySelector('.quiz-step.active');
            const incoming = document.querySelector(`.quiz-step[data-step="${step}"]`);
            if (!incoming) return;
            if (outgoing) {
                outgoing.classList.add('fade-out');
                setTimeout(() => {
                    outgoing.classList.remove('active', 'fade-out');
                    incoming.classList.add('active');
                }, 350);
            } else {
                incoming.classList.add('active');
            }
            updateDots();
        }

        function nextStep() {
            if (currentStep < totalSteps) { currentStep++; showStep(currentStep); }
        }

        function prevStep() {
            if (currentStep > 1) { currentStep--; showStep(currentStep); }
        }

        function finishGift() {
            giftState.contents = document.getElementById('boxContents').value;
            giftState.message = document.getElementById('specialMessage').value;
            updateLivePreview();

            const builder = document.getElementById('giftBuilder');
            builder.style.opacity = '0';
            builder.style.transform = 'translateY(-20px)';
            setTimeout(() => {
                builder.style.display = 'none';
                const final = document.getElementById('giftFinal');
                const theme = colorMap[giftState.color] || colorMap['Red & Gold'];
                const card = document.getElementById('finalCard');
                card.style.background = theme.bg;
                card.style.color = theme.text;

                document.getElementById('finalIcon').innerHTML = occasionIcons[giftState.occasion] || '';
                document.getElementById('finalIcon').style.color = theme.stroke;

                let html = '';
                if (giftState.occasion) html += `<div class="final-occasion">${giftState.occasion}</div>`;
                if (giftState.contents) html += `<div class="final-contents">${giftState.contents}</div>`;
                if (giftState.extras.length && giftState.extras[0] !== 'None') {
                    html += `<div class="final-extra">${extraIcons[giftState.extras[0]] || ''} ${giftState.extras[0]}</div>`;
                }
                if (giftState.message) html += `<div class="final-message">\u201C${giftState.message}\u201D</div>`;
                document.getElementById('finalDetails').innerHTML = html;

                final.style.display = 'block';
                setTimeout(() => final.classList.add('visible'), 50);
            }, 500);
        }

        function orderGift() {
            const parts = [
                `Occasion: ${giftState.occasion}`, `Contents: ${giftState.contents}`,
                `Color: ${giftState.color}`, `Extras: ${giftState.extras.join(', ') || 'None'}`,
                `Message: ${giftState.message || 'None'}`
            ];
            const msg = encodeURIComponent(`Hi! I'd like to order a personalized gift:\n${parts.join('\n')}`);
            window.open(`https://wa.me/?text=${msg}`, '_blank');
        }
    </script>
    <script src="js/preloader.js"></script>
    <script src="js/cursor.js"></script>
</body>
</html>
